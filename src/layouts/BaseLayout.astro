---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/nav/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import "@fontsource/ubuntu";
import "@fontsource/ubuntu/700.css";
import TopHeader from "../components/nav/TopHeader.astro";
import PageHeadline from "../components/PageHeadline.astro";
import MobileNavDrawer from "../components/nav/MobileNavDrawer.astro";

interface Props {
  title?: string;
  description?: string;
  subtitle?: string;
}

const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  subtitle,
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <script is:inline>
      // Prevent FOUC for dark mode
      if (
        localStorage.getItem("color-theme") === "dark" ||
        (!("color-theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>
  </head>

  <body
    class="bg-white dark:bg-gray-900 text-black dark:text-white min-h-screen flex flex-col"
  >
    <!-- Mobile Navigation Drawer (at body level for proper positioning) -->
    <MobileNavDrawer />

    <!-- Header -->
    <TopHeader />

    <!-- Main Content -->
    <main class="flex-1">
      <div class="max-w-2xl mx-auto px-4 py-8">
        <PageHeadline title={title} subtitle={subtitle} />
        <slot />
      </div>
    </main>

    <!-- Footer -->
    <Footer />
  </body>
</html>
